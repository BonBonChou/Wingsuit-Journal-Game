<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ç¿¼è£é£›è¡Œè¨“ç·´æ—¥èªŒ</title>
    <style>
      body {
        font-family: "Noto Sans TC", sans-serif;
        background: linear-gradient(to right, #e8e7cf, #edebaf, #edebab);
        color: #000;
        text-align: center;
        padding: 2em;
      }
      .container {
        max-width: 700px;
        margin: auto;
        background: rgba(255, 255, 255, 0.7);
        border-radius: 15px;
        padding: 2em;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
      }
      h1 {
        font-size: 35px; /* å­—é«”å¤§å° */
        color: #ffffff; /* ç™½è‰²å­—é«”æ¯”è¼ƒé©åˆåšå…‰æšˆæ•ˆæœ */
        font-weight: bold; /* ç²—é«” */
        text-align: center; /* ç½®ä¸­ */
        margin-bottom: 30px; /* ä¸‹æ–¹ç•™ç©º */
        text-shadow:
          0 0 5px #c2a200,
          0 0 10px #c2a200,
          0 0 15px #c2a200,
          0 0 20px #c2a200;
        /*background-color: #000000;   /* å»ºè­°åŠ æ·±èƒŒæ™¯è®“å…‰æšˆæ›´æ˜é¡¯ */
        padding: 0px;
        border-radius: 10px;
      }
      h4 {
        font-size: 1.4em;
        line-height: 1.6;
        margin-bottom: 1em;
        color: #e3ce0e;
      }
      h5 {
        font-size: 1.2em;
        line-height: 1.2;
        margin-top: 0em;
        margin-bottom: 1em;
        color: #b3a102;
      }
      .intro {
        text-align: left;
        margin-bottom: 0em;

        background: rgba(0, 0, 0, 0.05);
        padding: 0.5em;
        border-radius: 10px;
      }
      .hidden {
        display: none;
      }
      .center {
        text-align: center;
      }
      button {
        margin: 1em;
        padding: 0.75em 2em;
        font-size: 1.2em;
        border-radius: 12px;
        border: none;
        cursor: pointer;
        background: #fcd303;
        color: black;
        transition: background 0.3s ease;
      }
      button:hover { background: #e6cc0a; }
      .choice-btn {
        display: block;
        margin: 1em auto;
        width: 90%;
        cursor: pointer;
      } 
      #question-title {
        font-size: 2em; /* ä½ å¯ä»¥ä¾éœ€æ±‚èª¿æ•´æ•¸å€¼ */
        font-weight: bold; /* ä¹Ÿå¯ä»¥è¨­ç‚º normal, lighter ç­‰ */
        margin-bottom: 0.5em;
        color: #e3ce0e;
      }
      #question-text {
        font-size: 1.5em;
        line-height: 1.6;
        margin-bottom: 1em;
      }
      #knowledge-text {
        font-size: 1.3em;
        line-height: 1.6;
        margin-bottom: 1em;
        text-align: justify;
      }
      .choice-button {
        display: block;
        margin: 10px auto;
        width: 80%;
      }
      .content {max-width: 600px; margin: auto; }
      .choice-btn {
        display: block;
        width: 100%;
        margin: 0.5em 0;
        padding: 1em;
        font-size: 1em;
      }
      #output {
        margin-top: 2em;
        padding: 1em;
        border: 1px solid #ccc;
        background: #f9f9f9;
        white-space: pre-line;
        text-align: justify;
      }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC&display=swap" rel="stylesheet">
  </head>
  <body>
    <div class="container">
      <!-- é¦–é  -->
      <div id="start-screen">
        <h1>ç¿¼è£é£›è¡Œè¨“ç·´æ—¥èªŒ</h1>
        <h4 class="center">è¸ä¸Šå¤©ç©ºä¹‹è·¯ï¼Œæ›¸å¯«å†’éšªç¯‡ç« ï¼</h4>
        <div class="intro">
          <h5>ç¿¼è£é£›è¡Œæ˜¯ä¸€é …çµåˆé€Ÿåº¦ã€æŠ€å·§èˆ‡é¢¨éšªçš„æ¥µé™é‹å‹•ã€‚ç«‹é«”åŠ‡å ´é›»å½±ã€Šç¿¼è£é£›è¡Œã€‹çš„å…§å®¹åŒ–ç‚ºé€™æ¬¾å°éŠæˆ²ï¼Œå°‡ä½ çš„æ—…ç¨‹å¯«å…¥ä¸€ç¯‡ç¨ä¸€ç„¡äºŒçš„è¨“ç·´æ—¥èªŒâ€”â€”</h5>
          <h5>è¦‹è­‰ä½ çš„å …æŒèˆ‡é£›è¡Œå¤¢æƒ³å§ï¼</h5>
          <h3>ğŸ” éŠæˆ²èªªæ˜</h3>
          <p>
            ğŸŒŒ <strong>èƒŒæ™¯æ•…äº‹</strong><br/>ä½ å°‡è¸ä¸Šå’Œä¸»è§’ç¾…è²å¡”ç›¸ä¼¼çš„é£›è¡Œæ—…ç¨‹ï¼Œé€éä¸€é€£ä¸²çš„é¸æ“‡é«”é©—é£›è¡Œè¨“ç·´ã€æŒ‘æˆ°æ¥µé™ã€‚åœ¨é€™æ®µè¨“ç·´æ—…é€”ä¸­ï¼Œä½ å°‡å­¸æœƒåˆ¤è®€å¤©æ°£ã€èª¿æ•´é£›è¡Œå§¿æ…‹ã€é¸æ“‡åˆé©è£å‚™ç­‰ç­‰ï¼Œä¸¦ç†è§£èƒŒå¾Œçš„ç‰©ç†çŸ¥è­˜ã€‚
          </p>
          <p>
            ğŸ§  <strong>ç©æ³•ç°¡ä»‹</strong><br />éŠæˆ²ç¸½å…± 10 ç¨®æƒ…å¢ƒã€‚æ¯ç¨®æƒ…å¢ƒåªèƒ½é¸æ“‡ä¸€å€‹ç­”æ¡ˆã€‚
          </p>
          <p>
            ğŸ† <strong>ç›®æ¨™èˆ‡çµå±€</strong
            ><br />éŠæˆ²çµæŸå¾Œï¼Œå°‡æ ¹æ“šä½ çš„é¸æ“‡ç²å¾—å°ˆå±¬çš„ç¿¼è£é£›è¡Œè¨“ç·´æ—¥èªŒã€‚
          </p>
        </div>
        <button onclick="startGame()">é–‹å§‹å‰µå»ºæˆ‘çš„æ—¥èªŒ</button>
      </div>

      <!-- å•é¡Œé é¢ -->
      <div id="question-screen" class="hidden">
        <h2 id="question-title"></h2>
        <p style="text-align: center" id="question-text"></p>
        <div id="question-options"></div>
      </div>
      <!-- çŸ¥è­˜é  -->
      <div class="hidden" id="knowledge-screen">
        <p id="knowledge-text"></p>
        <div id="info-link" class="hidden" style="margin-top: 1em"></div>
        <button onclick="nextQuestion()">ç¹¼çºŒ</button>
      </div>

      <!-- è¼¸å‡ºé é¢ -->
      <div id="output-screen" class="hidden">
        <h2>ğŸŒŸ æˆ‘çš„è¨“ç·´æ—¥èªŒ</h2>
        <div id="output"></div>
        <button onclick="location.reload()">é‡æ–°é–‹å§‹</button>
        <button onclick="downloadJournal()">ä¸‹è¼‰æ—¥èªŒ</button>
      </div>
    </div>

    <script>
      const state = {
        step: 0,
        answers: {},
        fatal: false,
        journalParts: [],
      }

      const locations = {
        A: "ç‘å£«ï¼šæ„›æ ¼çˆ¾å³°",
        B: "ç¾åœ‹ï¼šæ‘©æŠ¼æ²™æ¼ ",
        C: "æ¾³æ´²ï¼šå¸Œçˆ¾ç£ä¸Šç©º",
      }

      const weatherOptions = [
        { key: "A", label: "æ™´æœ—" },
        { key: "B", label: "æ°£å£“è®ŠåŒ–å¤§" },
        { key: "C", label: "èƒ½è¦‹åº¦ä½ï¼Œæœ‰å¼·é¢¨" },
        { key: "D", label: "èƒ½è¦‹åº¦é›¶" },
      ]

      const questions = [
        {
          key: "location",
          text: "é¸æ“‡ä½ çš„è¨“ç·´åœ°é»ï¼š",
          options: {
            A: locations.A,
            B: locations.B,
            C: locations.C,
          },
          knowledge: {
            A: "é˜¿çˆ¾å‘æ–¯å±±è„ˆçš„æ„›æ ¼çˆ¾å³°åˆç¨±æ­»äº¡ä¹‹ç‰†ï¼Œå¤©æ°£è®ŠåŒ–å¿«é€Ÿã€é›£ä»¥é æ¸¬ï¼Œæ˜¯æ­»äº¡ç‡æ¥µé«˜çš„é£›è¡Œå ´åŸŸï¼Œè¶…é 60 ä½å†’éšªå®¶å†ä¹Ÿæ²’æœ‰å›ä¾†ã€‚",
            B: `æ‘©æŠ¼æ²™æ¼ çš„å³­å£é›–ç„¶åªæœ‰æ„›æ ¼çˆ¾å³°çš„ä¸‰åˆ†ä¹‹ä¸€é«˜ï¼Œå»æ˜¯ç·´ç¿’æ‡¸å´–èµ·è·³èˆ‡æ²¿å²©è„Šé£›è¡Œçš„ç†æƒ³å ´åŸŸã€‚
            
            ç„¶è€Œï¼Œé«˜æº«ä½¿ç©ºæ°£å¯†åº¦è®Šä½ï¼Œè¼ƒé›£ç”¢ç”Ÿè¶³å¤ çš„å‡åŠ›ï¼Œä¹Ÿæ›´å®¹æ˜“ç”¢ç”Ÿäº‚æµèˆ‡å°æµã€‚
            
            é€™äº›æ¢ä»¶è®“é£›è¡Œæ›´å…·æŒ‘æˆ°æ€§ï¼Œä¹Ÿè€ƒé©—é£›è¡Œå“¡çš„åˆ¤æ–·èˆ‡å§¿å‹¢æ§åˆ¶èƒ½åŠ›ã€‚`,
            C: `å¸Œçˆ¾ç£çš„æµ·å²¸ç­†ç›´å»¶ä¼¸ï¼Œæ²™ç˜å¹³å¦å¯¬å»£ï¼Œæ˜¯å¤©ç„¶çš„é£›è¡Œè‘—é™¸è·‘é“ã€‚
            
            åœ¨é€™è£¡å¾é«˜ç©ºèºä¸‹ï¼Œä¸åƒ…èƒ½ä¿¯ç°å£¯éº—æµ·æ™¯ï¼Œæ›´èƒ½ç·´ç¿’é«˜ç©ºã€é•·è·é›¢èˆ‡é«˜é€Ÿæ»‘ç¿”é£›è¡Œã€‚
            
            ç›¸è¼ƒæ–¼å±±å€ï¼Œé€™è£¡çš„æ°£æµè¼ƒç©©å®šï¼Œæ˜¯è¨“ç·´å§¿å‹¢èª¿æ•´èˆ‡é¢¨é˜»æ§åˆ¶çš„ç†æƒ³ç’°å¢ƒã€‚`,
          },
        },
        {
          key: "weather",
          question: "ä½ è¦åœ¨é€™ç¨®å¤©æ°£ä¸‹é€²è¡Œé£›è¡Œå—ï¼Ÿ",
          isWeather: true,
        },
        {
          key: "training",
          text: "ä»Šå¤©ä½ è¦å°ˆæ³¨çš„è¨“ç·´ç›®æ¨™æ˜¯ï¼Ÿ",
          options: {
            A: "æå‡å‡åŠ›",
            B: "ç·¨éšŠé£›è¡Œ",
            C: "é«˜ç©ºåŠ é€Ÿèˆ‡æ¸›é€Ÿ",
          },
          knowledge: {
            A: `èª¿æ•´é£›è¡Œå§¿å‹¢èˆ‡å‚¾æ–œè§’åº¦å¯ä»¥æœ€å¤§åŒ–å‡åŠ›ï¼Œé€²è€Œæå‡æ»‘ç¿”è·é›¢ã€‚
            
            å‡åŠ›ä¾†è‡ªç©ºæ°£åœ¨é£›ç¿¼ä¸Šä¸‹ç”¢ç”Ÿçš„å£“åŠ›å·®ï¼Œèˆ‡é£›è¡Œé¢ç©å’Œå§¿å‹¢æœ‰é—œã€‚
            
            è‰¯å¥½çš„å§¿æ…‹å¯é”åˆ°ç´„ 3:1 çš„æ»‘ç¿”æ¯”ï¼Œè®“ä½ æ¯ä¸‹é™ 1 å…¬å°ºå°±èƒ½æ»‘ç¿” 3 å…¬å°ºä»¥ä¸Šã€‚`,
            B: `ç·¨éšŠé£›è¡Œéœ€è¦é£›è¡Œè€…ä¹‹é–“é«˜åº¦çš„é»˜å¥‘èˆ‡è·é›¢æ§åˆ¶ã€‚æ¯ä½é£›è¡Œè€…åœ¨ç©ºä¸­é£›è¡Œæ™‚ï¼Œèº«å¾Œæœƒç”¢ç”Ÿä¸€æ®µä¸å¯è¦‹ã€æ··äº‚çš„æ°£æµï¼Œç¨±ç‚ºå°¾è·¡æ¹æµã€‚
            
            è‹¥ä¸å°å¿ƒé€²å…¥é€™äº›æ¹æµå€åŸŸï¼Œé£›é¼ è£å¯èƒ½æœƒæ‘ºç–Šã€å¤±é€Ÿï¼Œç”šè‡³å¢œè½ã€‚å®‰å…¨çš„é£›è¡Œä½ç½®é€šå¸¸æ˜¯æ–œä¸‹æ–¹æˆ–å´å¾Œæ–¹ï¼Œé¿å…æ­£å¾Œæ–¹ï¼Œæ‰èƒ½æœ‰æ•ˆé¿é–‹å°¾è·¡ã€‚
            
            æ¹æµé™¤äº†ä¾†è‡ªå‰æ–¹é£›è¡Œè€…ï¼Œä¹Ÿå¯èƒ½å› é¢¨èˆ‡åœ°å½¢äº¤äº’ä½œç”¨è€Œå½¢æˆã€‚é¢¨é€Ÿæ„ˆå¼·ã€é¢¨å‘è®ŠåŒ–æ„ˆåŠ‡çƒˆï¼Œæ¹æµå°±æ„ˆé›£é æ¸¬ï¼Œå› æ­¤éšŠå½¢èˆ‡é£›è¡Œç­–ç•¥çš„é¸æ“‡è‡³é—œé‡è¦ã€‚`,
            C: `é«˜ç©ºè·³å‚˜åˆæœŸé€Ÿåº¦è¿…é€Ÿä¸Šå‡ï¼Œåœ¨é‡åŠ›åŠ é€Ÿåº¦ä½œç”¨ä¸‹ï¼Œåƒ… 3 ç§’é˜å…§æ™‚é€Ÿå°±å¯é”åˆ° 60 è‹±é‡Œï¼Œ8 ç§’å¾Œçªç ´ 100 è‹±é‡Œã€‚ç´„ 15 ç§’å¾Œï¼Œç”±æ–¼ç©ºæ°£é˜»åŠ›èˆ‡é‡åŠ›é”æˆå¹³è¡¡ï¼Œé€Ÿåº¦ç©©å®šæ–¼çµ‚ç«¯é€Ÿåº¦ã€‚
            
            é£›è¡Œè€…å¯é€éèª¿æ•´èº«é«”å‚¾æ–œè§’èˆ‡æ‰‹è…³é–‹å±•ç¨‹åº¦ï¼Œæ§åˆ¶ç©ºæ°£é˜»åŠ›ï¼Œé”åˆ°æé€Ÿæˆ–æ¸›é€Ÿçš„æ•ˆæœã€‚è¿‘å¹´è¨˜éŒ„é¡¯ç¤ºï¼Œæ¥µç«¯å§¿å‹¢ä¸‹çš„çµ‚ç«¯é€Ÿåº¦ç”šè‡³å¯çªç ´æ¯å°æ™‚ 250 è‹±é‡Œã€‚
            
            ç•¶æ‹‰é–‹é™è½å‚˜æ™‚ï¼Œæ™‚é€Ÿå°‡ç¬é–“é©Ÿé™è‡³ 10 è‹±é‡Œï¼Œå¦‚åŒç©ºä¸­æ€¥ç…è»Šã€‚é€™ä¸€éç¨‹è€ƒé©—é£›è¡Œè€…å°æ™‚æ©Ÿèˆ‡å§¿å‹¢çš„æº–ç¢ºæŒæ¡ï¼Œæ˜¯é£›è¡Œè¨“ç·´ä¸­æœ€å…·é¢¨éšªèˆ‡æŠ€è¡“æ€§çš„é …ç›®ä¹‹ä¸€ã€‚`,
          },
        },
        {
          key: "gear",
          text: "ä½ é¸æ“‡çš„é£›é¼ è£è£å‚™æ˜¯ï¼Ÿ",
          options: {
            A: "å‚³çµ±å°¼é¾é£›é¼ è£",
            B: "æ–°å‹æ°£å®¤è£",
            C: "ç¢³çº–ç¶­å¼·åŒ–æ°£å®¤è£",
          },
          knowledge: {
            A: "æ—©æœŸé£›é¼ è£è¼ƒç‚ºç°¡å–®ï¼Œå°é£›è¡Œè€…çš„å§¿å‹¢æ§åˆ¶è¦æ±‚æ›´é«˜ã€‚",
            B: "æ°£å®¤è£å‚™èƒ½è¿…é€Ÿå……æ°£ç©©å®šæ»‘ç¿”ï¼Œæ˜¯ç›®å‰å¸¸è¦‹çš„ç¿¼è£é¡å‹ã€‚",
            C: "ç¢³çº–ç¶­å¼·åŒ–æè³ªæä¾›æ›´é«˜å‰›æ€§èˆ‡æŠ—é¢¨èƒ½åŠ›ï¼Œæå‡é£›è¡Œç©©å®šæ€§ã€‚",
          },
        },
      ];

      function formatknowledge(knowledge) {
        return knowledge
          .replace(/\n/g, "<br>") // è‹¥ä½  intro è£¡æ˜¯ç”¨æ›è¡Œç¬¦è™Ÿæ–·è¡Œï¼Œä¹Ÿå¯ä»¥åŠ é€™è¡Œ
          .replace(/\s{2,}/g, ""); // æ¸…é™¤å¤šé¤˜ç©ºç™½
      }

      function startGame() {
        document.getElementById("start-screen").classList.add("hidden");
        state.step = 0;
        state.answers = {};
        state.fatal = false;
        state.journalParts = [];
        showQuestion();
      }

      function showQuestion() {
        const step = state.step;
        const q = questions[step];        
        document.getElementById("question-screen").classList.remove("hidden");
        document.getElementById("question-title").textContent = q.text;
        document.getElementById("question-text").textContent = q.question;

        
        const qOptBox = document.getElementById("question-options");
        qOptBox.innerHTML = "";
        if (q.isWeather) {
          const randomWeather =
                weatherOptions[Math.floor(Math.random() * weatherOptions.length)];
          state.currentWeather = randomWeather;

          document.getElementById("question-title").textContent = `ä»Šå¤©çš„å¤©æ°£æ˜¯ï¼š${randomWeather.label}`;

          const yesBtn = document.createElement("button");
          yesBtn.textContent = "æ˜¯çš„ï¼Œé–‹å§‹é£›è¡Œï¼";
          yesBtn.className = "choice-btn";
          yesBtn.onclick = () => {
            state.answers[q.key] = randomWeather.key
            if (randomWeather.key === "D") state.fatal = true
            //state.step++
            nextQuestion()
          };
          qOptBox.appendChild(yesBtn);

          const noBtn = document.createElement("button");
          noBtn.textContent = "æ“‡æ—¥å†æˆ°ï¼Œæ›å€‹å¤©æ°£å§";
          noBtn.className = "choice-btn";
          noBtn.onclick = () => showQuestion();
          qOptBox.appendChild(noBtn);
          return;
        }

        Object.entries(q.options).forEach(([key, label]) => {
          const btn = document.createElement("button");
          btn.textContent = label;
          btn.className = "choice-btn";
          btn.onclick = () => {
            state.answers[q.key] = key;
            renderKnowledgePage(q, key);
          };
          qOptBox.appendChild(btn);
        });
      }

      function renderKnowledgePage(question, selectedKey) {
        document.getElementById("question-screen").classList.add("hidden");
        document.getElementById("knowledge-screen").classList.remove("hidden");

        document.getElementById("knowledge-text").innerHTML = formatknowledge(question.knowledge[selectedKey]);

        const step = state.step;
        const info = questions[step];
        const link = info && info.link;
        const linkArea = document.getElementById("info-link");
        if (link) {
          linkArea.innerHTML = "<p>ç›¸é—œå…§å®¹</p>";

          // æƒ…æ³ 1ï¼šå¤šå€‹ç¶²å€
          if (Array.isArray(link)) {
            link.forEach((l) => {
              linkArea.innerHTML += `<a href="${l.url}" target="_blank" style="display:block; color:#00ccff;">${l.text}</a>`
            });
          }
          // æƒ…æ³ 2ï¼šå–®ä¸€ç¶²å€
          else if (link.url && link.text) {
            linkArea.innerHTML += `<a href="${link.url}" target="_blank" style="display:block; color:#00ccff;">${link.text}</a>`;
          }

          linkArea.classList.remove("hidden");
        } else {
          linkArea.innerHTML = "";
          linkArea.classList.add("hidden");
        }
      }

      function nextQuestion() {
        document.getElementById("knowledge-screen").classList.add("hidden");
        state.step++;
        if (state.step < questions.length) {
          showQuestion();
        } else {
          showOutput();
        }
      }

      function showOutput() {
        document.getElementById("output-screen").classList.remove("hidden");

        const outputEl = document.getElementById("output");
        outputEl.innerText = "";
        const lines = [];

        const introLines = [
          "ä»Šå¤©æ˜¯å€‹é‡è¦çš„æ—¥å­ï¼Œæˆ‘é–‹å§‹äº†ç¿¼è£é£›è¡Œçš„è¨“ç·´ä¹‹æ—…ã€‚",
          "ç«™åœ¨èµ·é£›é»ï¼Œæˆ‘çŸ¥é“é€™å°‡æ˜¯æ”¹è®Šæˆ‘çš„é£›è¡Œäººç”Ÿçš„ä¸€å¤©ã€‚",
          "ç¶“éé•·æ™‚é–“æº–å‚™ï¼Œæˆ‘çµ‚æ–¼è¸ä¸Šç¿¼è£é£›è¡Œçš„è¨“ç·´å¾é€”ã€‚"
        ];
        lines.push(randomFrom(introLines));

        const locationLines = {
          A: [
            "æˆ‘ä¾†åˆ°å£¯éº—çš„æ„›æ ¼çˆ¾å³°ï¼Œé€™è£¡è¢«ç¨±ç‚ºæ­»äº¡ä¹‹ç‰†ï¼Œæ˜¯ç„¡æ•¸å†’éšªè€…å¤¢æƒ³çš„æŒ‘æˆ°åœ°é»ã€‚",
            "æˆ‘ä¾†åˆ°å£¯éº—çš„æ„›æ ¼çˆ¾å³°ï¼Œé€™è£¡å¤©æ°£è®ŠåŒ–æ¥µå¿«ï¼Œè¨“ç·´æ™‚éœ€æ ¼å¤–è­¦è¦ºæ¯ä¸€å€‹é¢¨çš„è¨Šè™Ÿã€‚",
            "æˆ‘ä¾†åˆ°å£¯éº—çš„æ„›æ ¼çˆ¾å³°ï¼Œé€™è£¡æœ‰è‘—ç¿¼è£é£›è¡Œæœ€é«˜çš„é¢¨éšªèˆ‡æ¦®è€€ï¼Œä¹Ÿæœ‰è¶…é 60 ä½å†’éšªå®¶æœªèƒ½ç”Ÿé‚„ã€‚"
          ],
          B: [
            "æˆ‘é¸æ“‡äº†æ‘©æŠ¼æ²™æ¼ ï¼Œåœ¨ç‚™ç†±æ‡¸å´–é–“é€²è¡Œæ‡¸å´–èµ·è·³èˆ‡è²¼åœ°é£›è¡Œè¨“ç·´ã€‚",
            "æˆ‘é¸æ“‡äº†æ‘©æŠ¼æ²™æ¼ ï¼Œå„˜ç®¡é€™è£¡é«˜åº¦ä¸å¦‚é˜¿çˆ¾å‘æ–¯å±±ï¼Œä½†å³­å£åœ°å½¢èˆ‡ç†±ç©ºæ°£å¸¶ä¾†ç¨ç‰¹æŒ‘æˆ°ã€‚",
            "æˆ‘é¸æ“‡äº†æ‘©æŠ¼æ²™æ¼ ï¼Œé€™è£¡çš„é«˜æº«ä½¿å‡åŠ›é›£ä»¥æŒæ¡ï¼Œæ¯ä¸€æ¬¡èµ·è·³éƒ½ä»°è³´æ¥µé«˜çš„åˆ¤æ–·åŠ›èˆ‡åæ‡‰é€Ÿåº¦ã€‚"
          ],
          C: [
            "æˆ‘ä¾†åˆ°æ¾³æ´²çš„å¸Œçˆ¾ç£ï¼Œå¾é«˜ç©ºä¿¯ç°ç­†ç›´æµ·å²¸èˆ‡å£¯éº—æµ·æ™¯ï¼Œä»¤äººéœ‡æ’¼ã€‚",
            "æˆ‘ä¾†åˆ°æ¾³æ´²çš„å¸Œçˆ¾ç£ï¼Œé€™è£¡çš„æ°£æµç©©å®šï¼Œæ˜¯ç†æƒ³çš„é«˜ç©ºæ»‘ç¿”èˆ‡é¢¨é˜»æ§åˆ¶è¨“ç·´å ´ã€‚",
            "æˆ‘ä¾†åˆ°æ¾³æ´²çš„å¸Œçˆ¾ç£ï¼Œé€™è£¡å¯¬å»£çš„æ²™ç˜æˆç‚ºå®Œç¾è‘—é™¸å ´ï¼Œä¹Ÿè®“æˆ‘æ›´å®‰å¿ƒåœ°ç·´ç¿’é«˜é€Ÿé•·è·é›¢é£›è¡Œã€‚"
          ]
        };
        lines.push(randomFrom(locationLines[state.answers.location]));


        if (state.answers.weather === "D") {
          const fatalEndings = {
            A: "ä¸å¹¸çš„æ˜¯ï¼Œæˆ‘åœ¨èƒ½è¦‹åº¦ç‚ºé›¶çš„æƒ…æ³ä¸‹èµ·é£›ï¼Œæœ€çµ‚è¿·å¤±åœ¨èŒ«èŒ«çš„å¤§é›ªèˆ‡é¢¨æš´ä¹‹ä¸­â€¦â€¦é€™æ¬¡ä»»å‹™ï¼Œä»¥æ²‰é»˜å‘Šçµ‚ã€‚",
            B: "ä¸å¹¸çš„æ˜¯ï¼Œæˆ‘åœ¨èƒ½è¦‹åº¦ç‚ºé›¶çš„æƒ…æ³ä¸‹èµ·é£›ï¼Œæœ€çµ‚è¿·å¤±åœ¨æ»¾æ»¾é»ƒæ²™èˆ‡æ²™å¡µæš´ä¹‹ä¸­â€¦â€¦é€™æ¬¡ä»»å‹™ï¼Œä»¥æ²‰é»˜å‘Šçµ‚ã€‚",
            C: "ä¸å¹¸çš„æ˜¯ï¼Œæˆ‘åœ¨èƒ½è¦‹åº¦ç‚ºé›¶çš„æƒ…æ³ä¸‹èµ·é£›ï¼Œæœ€çµ‚è¿·å¤±åœ¨çŒ›çƒˆæš´é¢¨é›¨çš„å¸­æ²ä¹‹ä¸­â€¦â€¦é€™æ¬¡ä»»å‹™ï¼Œä»¥æ²‰é»˜å‘Šçµ‚ã€‚"
          };
          lines.push(fatalEndings[state.answers.location]);
        } else {
          const weatherLabel = {
            A: [
              "å¤©æ°£æ™´æœ—ï¼Œæ°£æµç©©å®šï¼Œè®“æˆ‘æ›´å°ˆæ³¨æ–¼æŠ€è¡“çš„æå‡ã€‚",
              "é™½å…‰æ™®ç…§ï¼Œåœ°å½¢æ¸…æ™°å¯è¦‹ï¼Œæ˜¯ç†æƒ³çš„é£›è¡Œè¨“ç·´æ—¥ã€‚",
              "ç©©å®šçš„å¤©æ°£è®“æˆ‘å¾—ä»¥å°ˆæ³¨æ–¼æ¯ä¸€å€‹é£›è¡Œç´°ç¯€çš„å„ªåŒ–ã€‚"
            ],
            B: [
              "æ°£å£“è®ŠåŒ–é »ç¹ï¼Œæˆ‘å¿…é ˆæ™‚åˆ»èª¿æ•´å§¿æ…‹ä¾†æ‡‰å°é¢¨å‹¢ã€‚",
              "ä¸ç©©å®šçš„å¤©æ°£è¿«ä½¿æˆ‘æ›´éˆæ´»åœ°ä¿®æ­£é£›è¡Œè»Œè·¡ã€‚",
              "ä»Šå¤©çš„æ°£æµè¤‡é›œï¼Œæ˜¯è§€å¯Ÿèˆ‡å¯¦ä½œå§¿å‹¢æ§åˆ¶çš„å¥½æ™‚æ©Ÿã€‚"
            ],
            C: [
              "å¼·é¢¨èˆ‡ä½èƒ½è¦‹åº¦å¢æ·»è¨“ç·´é›£åº¦ï¼Œä¹Ÿç£¨ç·´äº†æˆ‘çš„æ‡‰è®Šèƒ½åŠ›ã€‚",
              "åœ¨é¢¨å‹¢è®ŠåŒ–åŠ‡çƒˆçš„æƒ…æ³ä¸‹ï¼Œæˆ‘æ›´å°ˆæ³¨æ–¼æ¯ä¸€å€‹ç´°ç¯€çš„æ§åˆ¶ã€‚",
              "æƒ¡åŠ£å¤©æ°£ä¸‹çš„é£›è¡Œæ˜¯ä¸€å ´æ„å¿—èˆ‡æŠ€å·§çš„é›™é‡è€ƒé©—ã€‚"
            ]
          };
          lines.push(randomFrom(weatherLabel[state.answers.weather]));

          if (state.answers.training === "A")
            lines.push(
              randomFrom([
                "æˆ‘å°ˆæ³¨æ–¼æå‡å‡åŠ›çš„è¨“ç·´ï¼Œé€éè§’åº¦èˆ‡å§¿å‹¢çš„èª¿æ•´ä¾†å¢åŠ æ»‘ç¿”è·é›¢ã€‚",
                "æˆ‘åè¦†ç·´ç¿’èº«é«”å‚¾æ–œèˆ‡å±•ç¿¼å§¿å‹¢ï¼Œè©¦åœ–å»¶é•·é£›è¡Œæ™‚é–“ã€‚",
                "å‡åŠ›è¨“ç·´è®“æˆ‘æ›´åŠ ç†è§£ç©ºæ°£æµå‹•èˆ‡èº«é«”è§’åº¦ä¹‹é–“çš„å¾®å¦™é—œä¿‚ã€‚"
              ])
            );
          if (state.answers.training === "B")
            lines.push(
              randomFrom([
                "æˆ‘é€²è¡Œäº†ç·¨éšŠé£›è¡Œè¨“ç·´ï¼Œèˆ‡å¤¥ä¼´ä¿æŒè‰¯å¥½è·é›¢ï¼Œé¿å…æ¹æµå¹²æ“¾ã€‚",
                "é€éè§€å¯Ÿå¤¥ä¼´çš„å‹•ä½œï¼Œæˆ‘å­¸æœƒäº†å³æ™‚å¾®èª¿è‡ªå·±çš„é£›è¡Œå§¿æ…‹ã€‚",
                "ç·¨éšŠé£›è¡Œä¸åƒ…éœ€è¦æŠ€è¡“ï¼Œä¹Ÿéœ€è¦çµ•å°çš„å°ˆæ³¨èˆ‡é»˜å¥‘ã€‚"
              ])
            );
          if (state.answers.training === "C")
            lines.push(
              randomFrom([
                "æˆ‘æ¨¡æ“¬äº†é«˜ç©ºåŠ é€Ÿèˆ‡æ¸›é€Ÿçš„å ´æ™¯ï¼Œå­¸ç¿’æ§åˆ¶å§¿æ…‹èˆ‡é€Ÿåº¦è®ŠåŒ–ã€‚",
                "é€™æ¬¡çš„é£›è¡Œé‡é»æ˜¯çµ‚ç«¯é€Ÿåº¦çš„æŒæ¡èˆ‡ç©ºæ°£é˜»åŠ›çš„åˆ©ç”¨ã€‚",
                "é€éèª¿æ•´è‚¢é«”å¼µåŠ›èˆ‡ä¿¯ä»°è§’ï¼Œæˆ‘æ›´ç†Ÿæ‚‰å¦‚ä½•åœ¨é«˜é€Ÿä¸­ä¿æŒç©©å®šã€‚"
              ])
            );

          if (state.answers.gear === "A")
            lines.push(
              randomFrom([
                "æˆ‘ä½¿ç”¨çš„æ˜¯å‚³çµ±å°¼é¾é£›é¼ è£ï¼Œå„˜ç®¡ç°¡å–®ï¼Œå»èƒ½å¹«åŠ©æˆ‘å¼·åŒ–åŸºæœ¬é£›è¡ŒæŠ€å·§ã€‚",
                "é€™å¥—è£å‚™è¦æ±‚æ¥µé«˜çš„èº«é«”æ§åˆ¶åŠ›ï¼Œæ˜¯ç£¨ç·´åŸºç¤çš„æœ€ä½³é¸æ“‡ã€‚",
                "å°¼é¾é£›é¼ è£è®“æˆ‘é‡æ–°é«”æœƒé¢¨çš„æµå‹•èˆ‡èº«é«”çš„é…åˆã€‚"
              ])
            );
          if (state.answers.gear === "B")
            lines.push(
              randomFrom([
                "æˆ‘ç©¿ä¸Šæ–°å‹æ°£å®¤è£å‚™ï¼Œèƒ½å¿«é€Ÿå……æ°£ç©©å®šæ»‘ç¿”ï¼Œæ˜¯æå‡æ•ˆç‡çš„é‡è¦å·¥å…·ã€‚",
                "æ°£å®¤è¨­è¨ˆå¸¶ä¾†æ›´å¼·çš„å‡åŠ›èˆ‡ç©©å®šæ€§ï¼Œè®“é£›è¡Œè®Šå¾—æ›´åŠ æµæš¢ã€‚",
                "é€™å¥—è£å‚™åœ¨èµ·è·³åˆæœŸå³æä¾›ç©©å®šæ”¯æŒï¼Œæ˜¯é«˜ç©ºé£›è¡Œçš„å¯é é¸æ“‡ã€‚"
              ])
            );
          if (state.answers.gear === "C")
            lines.push(
              randomFrom([
                "æˆ‘é…å‚™ç¢³çº–ç¶­å¼·åŒ–é£›é¼ è£ï¼Œæä¾›å“è¶Šçš„ç©©å®šæ€§ï¼Œè®“æˆ‘æ›´æœ‰ä¿¡å¿ƒå®Œæˆè¨“ç·´ã€‚",
                "ç¢³çº–ç¶­çµæ§‹åœ¨é«˜é€Ÿé£›è¡Œä¸­ä¿æŒå‰›æ€§ï¼Œæ¸›å°‘ä¸å¿…è¦çš„éœ‡å‹•èˆ‡åç§»ã€‚",
                "é€™æ˜¯å°ˆæ¥­é£›è¡Œå“¡å¸¸ç”¨çš„è£å‚™ï¼Œåœ¨æƒ¡åŠ£ç’°å¢ƒä¸­ä¹Ÿèƒ½ç©©å®šè¡¨ç¾ã€‚"
              ])
            );

          lines.push(
            randomFrom([
              "è¨“ç·´é›–ç„¶è‰±é›£ï¼Œä½†æˆ‘å¾ä¸­å­¸åˆ°äº†å¯¶è²´çš„é£›è¡ŒçŸ¥è­˜èˆ‡ç¶“é©—ã€‚é€™ä¸€åˆ‡éƒ½å°‡æˆç‚ºæˆ‘é€šå¾€é«˜ç©ºå¤¢æƒ³çš„åŸºçŸ³ã€‚",
              "é€™æ®µé£›è¡Œæ—…ç¨‹æ•™æœƒæˆ‘å°Šé‡é¢¨çš„åŠ›é‡ï¼Œä¹Ÿè®“æˆ‘æ›´ç†è§£è‡ªå·±åœ¨ç©ºä¸­çš„æ¯ä¸€å€‹é¸æ“‡ã€‚",
              "æ¯ä¸€æ¬¡é£›è¡Œéƒ½æ˜¯èˆ‡è‡ªç„¶å°è©±çš„æ©Ÿæœƒï¼Œè€Œä»Šå¤©çš„è¨“ç·´ï¼Œè®“æˆ‘æ›´åŠ å …å®šäº†è¿½å¤¢çš„æ±ºå¿ƒã€‚"
            ])
          );
        }
        // æ‰“å­—æ©Ÿæ•ˆæœ
        let index = 0
        function typeLine() {
          if (index < lines.length) {
            outputEl.innerText += lines[index] + "\n"
            index++
            setTimeout(typeLine, 1000)
          };
        }
        typeLine();
      }
      
      function randomFrom(array) {
        return array[Math.floor(Math.random() * array.length)];
      }

      function downloadJournal() {
        const text = document.getElementById("output").innerText;
        const blob = new Blob([text], { type: "text/plain" });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = "ç¿¼è£é£›è¡Œè¨“ç·´æ—¥èªŒ.txt";
        a.click();
        URL.revokeObjectURL(url);
      }
    </script>
  </body>
</html>
